(()=>{var e={};e.id=9,e.ids=[9],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5736:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>b,tree:()=>i}),s(9673),s(5495),s(5866);var a=s(3191),t=s(8716),l=s(7922),n=s.n(l),d=s(5231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(r,o);let i=["",{children:["past-papers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9673)),"D:\\web app\\frontend\\src\\app\\past-papers\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5495)),"D:\\web app\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\web app\\frontend\\src\\app\\past-papers\\page.tsx"],x="/past-papers/page",u={require:s,loadChunk:()=>Promise.resolve()},b=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/past-papers/page",pathname:"/past-papers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},5388:(e,r,s)=>{Promise.resolve().then(s.bind(s,106))},2881:(e,r,s)=>{"use strict";s.d(r,{Z:()=>o});var a=s(7577);let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(...e)=>e.filter((e,r,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===r).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:t,className:d="",children:o,iconNode:i,...c},x)=>(0,a.createElement)("svg",{ref:x,...n,width:r,height:r,stroke:e,strokeWidth:t?24*Number(s)/Number(r):s,className:l("lucide",d),...c},[...i.map(([e,r])=>(0,a.createElement)(e,r)),...Array.isArray(o)?o:[o]])),o=(e,r)=>{let s=(0,a.forwardRef)(({className:s,...n},o)=>(0,a.createElement)(d,{ref:o,iconNode:r,className:l(`lucide-${t(e)}`,s),...n}));return s.displayName=`${e}`,s}},106:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>S});var a=s(326),t=s(7577),l=s(434),n=s(9798);let d=(0,s(2881).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var o=s(8258),i=s(2179),c=s(2257),x=s(9954),u=s(8485),b=s(6343),m=s(4014),h=s(2070),g=s(6283),p=s(6338),f=s(210),y=s(8932),j=s(7358),w=s(7506),N=s(8393),v=s(9183),k=s(2714),C=s(1540),Z=s(8307),P=s(5684);function S(){let{user:e,profile:r}=(0,P.a)(),[s,S]=(0,t.useState)(null),[$,L]=(0,t.useState)({}),[_,z]=(0,t.useState)(new Set),[E,q]=(0,t.useState)(new Set),[D,F]=(0,t.useState)(null),[A,M]=(0,t.useState)(""),[R,G]=(0,t.useState)(!0),[U,H]=(0,t.useState)(null),I=async()=>{try{G(!0),H(null);let e=await fetch("http://localhost:3001/papers/browse");if(!e.ok)throw Error("Failed to load folders");let r=await e.json();S(r.folderId),L({[r.folderId]:r.items})}catch(e){console.error("Error loading root folder:",e),H("Failed to load past papers. Make sure the backend is running.")}finally{G(!1)}},W=async e=>{if(!$[e])try{q(r=>new Set(r).add(e));let r=await fetch(`http://localhost:3001/papers/browse/${e}`);if(!r.ok)throw Error("Failed to load folder");let s=await r.json();L(r=>({...r,[e]:s.items}))}catch(e){console.error("Error loading folder:",e)}finally{q(r=>{let s=new Set(r);return s.delete(e),s})}},B=async e=>{_.has(e)?z(r=>{let s=new Set(r);return s.delete(e),s}):($[e]||await W(e),z(r=>new Set(r).add(e)))},O=e=>{F(e)},T=e=>{if(e.downloadUrl){let r=document.createElement("a");r.href=`http://localhost:3001${e.downloadUrl}`,r.download=e.name,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},V=e=>{let r=e.toLowerCase();if(r.includes("chemistry")||r.includes("5070"))return a.jsx(o.Z,{className:"w-5 h-5"});if(r.includes("physics")||r.includes("5054"))return a.jsx(i.Z,{className:"w-5 h-5"});if(r.includes("math")||r.includes("4037"))return a.jsx(c.Z,{className:"w-5 h-5"});if(r.includes("biology")||r.includes("5090"))return a.jsx(x.Z,{className:"w-5 h-5"});if(r.includes("english")||r.includes("1123"))return a.jsx(u.Z,{className:"w-5 h-5"});if(r.includes("islamiyat")||r.includes("2058"))return a.jsx(b.Z,{className:"w-5 h-5"});if(r.includes("pakistan")||r.includes("2059"))return a.jsx(m.Z,{className:"w-5 h-5"});else return a.jsx(h.Z,{className:"w-5 h-5"})},Q=e=>{let r=e.toLowerCase();return r.includes("qp")||r.includes("question")?a.jsx(g.Z,{className:"w-4 h-4"}):r.includes("ms")||r.includes("mark")||r.includes("answer")?a.jsx(p.Z,{className:"w-4 h-4"}):r.includes("er")||r.includes("examiner")?a.jsx(f.Z,{className:"w-4 h-4"}):a.jsx(g.Z,{className:"w-4 h-4"})},X=(e,r=0)=>{let s=_.has(e.id),t=E.has(e.id),l=$[e.id]||[],n=24*r,d=(()=>{switch(e.folderType){case"subject":return{icon:V(e.name),color:"text-gray-700",bgColor:"bg-white",borderColor:"border-gray-300",label:"Subject"};case"category":return{icon:a.jsx(y.Z,{className:"w-5 h-5"}),color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",label:"Category"};case"year":return{icon:a.jsx(j.Z,{className:"w-5 h-5"}),color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",label:"Year"};case"month":return{icon:a.jsx(j.Z,{className:"w-5 h-5"}),color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",label:"Session"};default:return{icon:a.jsx(y.Z,{className:"w-5 h-5"}),color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",label:""}}})();return(0,a.jsxs)("div",{className:"border-b border-gray-100 last:border-b-0",children:[(0,a.jsxs)("button",{onClick:()=>B(e.id),className:"w-full p-3 flex items-center gap-3 hover:bg-gray-50 transition-colors",style:{paddingLeft:`${n+12}px`},children:[t?a.jsx(w.Z,{className:"w-4 h-4 text-gray-400 animate-spin flex-shrink-0"}):a.jsx("div",{className:"flex-shrink-0",children:s?a.jsx(N.Z,{className:"w-5 h-5 text-gray-500"}):a.jsx(v.Z,{className:"w-5 h-5 text-gray-500"})}),a.jsx("div",{className:`p-2.5 rounded-xl ${d.bgColor} border ${d.borderColor} flex-shrink-0 ${d.color}`,children:d.icon}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[a.jsx("span",{className:`font-semibold ${d.color}`,children:e.name}),d.label&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["(",d.label,")"]})]})]}),s&&!t&&(0,a.jsxs)("div",{children:[l.map(e=>e.isFolder?X(e,r+1):Y(e,r+1)),0===l.length&&a.jsx("div",{className:"p-3 text-sm text-gray-500 italic",style:{paddingLeft:`${n+48}px`},children:"Empty folder"})]})]},e.id)},Y=(e,r=0)=>{let s=Q(e.name),t=(()=>{let r=e.name.toLowerCase();return r.includes("qp")||r.includes("question")?{bg:"bg-white",text:"text-gray-700",border:"border-gray-300",label:"Question Paper"}:r.includes("ms")||r.includes("mark")||r.includes("answer")?{bg:"bg-gray-900",text:"text-white",border:"border-gray-900",label:"Mark Scheme"}:r.includes("er")||r.includes("examiner")?{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300",label:"Examiner Report"}:{bg:"bg-white",text:"text-gray-600",border:"border-gray-200",label:"Document"}})();return(0,a.jsxs)("div",{className:"p-3 flex items-center justify-between hover:bg-gray-50 transition-all border-b border-gray-100 last:border-b-0 group",style:{paddingLeft:`${24*r+12}px`},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`p-2 rounded-lg ${t.bg} border ${t.border} ${t.text} flex-shrink-0`,children:s}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[a.jsx("span",{className:"text-sm text-gray-900 truncate font-medium",children:e.name}),a.jsx("span",{className:`text-xs ${t.text} font-medium`,children:t.label})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-shrink-0 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>O(e),className:"p-2 text-white bg-gray-900 hover:bg-black rounded-lg transition-colors",title:"View",children:a.jsx(k.Z,{size:16})}),a.jsx("button",{onClick:()=>T(e),className:"p-2 text-gray-900 bg-white hover:bg-gray-100 border border-gray-300 rounded-lg transition-colors",title:"Download",children:a.jsx(C.Z,{size:16})})]})]},e.id)};if(R)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[a.jsx(l.default,{href:"/",className:"text-2xl font-black text-brand-burgundy",children:"Propel"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-brand-burgundy font-semibold",children:[a.jsx(n.Z,{size:18}),"Home"]}),(0,a.jsxs)(l.default,{href:"/login",className:"flex items-center gap-2 px-4 py-2 bg-brand-burgundy text-white rounded-lg hover:bg-brand-burgundy/90 font-semibold",children:[a.jsx(d,{size:18}),"Login"]})]})]})}),a.jsx("div",{className:"p-8 max-w-7xl mx-auto flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(w.Z,{className:"w-12 h-12 text-brand-burgundy animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading past papers..."})]})})]});if(U)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(()=>a.jsx("nav",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[a.jsx(l.default,{href:"/",className:"text-2xl font-black text-brand-burgundy",children:"Propel"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-brand-burgundy font-semibold",children:[a.jsx(n.Z,{size:18}),"Home"]}),e&&r?a.jsx(l.default,{href:"teacher"===r.role?"/teacher/dashboard":"admin"===r.role?"/admin/dashboard":"/student/dashboard",className:"flex items-center gap-2 px-4 py-2 bg-brand-burgundy text-white rounded-lg hover:bg-brand-burgundy/90 font-semibold",children:"Dashboard"}):(0,a.jsxs)(l.default,{href:"/login",className:"flex items-center gap-2 px-4 py-2 bg-brand-burgundy text-white rounded-lg hover:bg-brand-burgundy/90 font-semibold",children:[a.jsx(d,{size:18}),"Login"]})]})]})}),{}),a.jsx("div",{className:"p-8 max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[a.jsx("p",{className:"text-red-600 font-medium",children:U}),a.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-black",children:"Retry"})]})})]});let J=s&&$[s]?A?$[s].filter(e=>e.name.toLowerCase().includes(A.toLowerCase())):$[s]:[];return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[a.jsx(l.default,{href:"/",className:"text-2xl font-black text-brand-burgundy",children:"Propel"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-brand-burgundy font-semibold",children:[a.jsx(n.Z,{size:18}),"Home"]}),e&&r?a.jsx(l.default,{href:"teacher"===r.role?"/teacher/dashboard":"admin"===r.role?"/admin/dashboard":"/student/dashboard",className:"flex items-center gap-2 px-4 py-2 bg-brand-burgundy text-white rounded-lg hover:bg-brand-burgundy/90 font-semibold",children:"Dashboard"}):(0,a.jsxs)(l.default,{href:"/login",className:"flex items-center gap-2 px-4 py-2 bg-brand-burgundy text-white rounded-lg hover:bg-brand-burgundy/90 font-semibold",children:[a.jsx(d,{size:18}),"Login"]})]})]})}),(0,a.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[D&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:D.name}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>T(D),className:"px-4 py-2 text-sm bg-gray-900 text-white rounded-lg hover:bg-black transition-colors",children:"Download"}),a.jsx("button",{onClick:()=>F(null),className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Close"})]})]}),a.jsx("iframe",{src:`http://localhost:3001${D.embedUrl}`,className:"flex-1 w-full",title:"PDF Viewer"})]})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold font-display text-gray-900",children:"Past Papers Library"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Browse past papers organized by subject, year, and session. Free access for everyone!"})]}),a.jsx("div",{className:"flex gap-2 w-full md:w-auto",children:(0,a.jsxs)("div",{className:"relative flex-1 md:w-64",children:[a.jsx(Z.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:"Search subjects...",className:"w-full pl-10 pr-4 py-2.5 bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-burgundy focus:border-brand-burgundy",value:A,onChange:e=>M(e.target.value)})]})})]}),!e&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-brand-burgundy to-brand-pink text-white rounded-xl p-6 mb-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Want to track your progress?"}),a.jsx("p",{className:"text-white/90",children:"Sign up for a free account to bookmark papers, track your learning, and get personalized recommendations."})]}),a.jsx(l.default,{href:"/signup",className:"px-6 py-3 bg-white text-brand-burgundy font-bold rounded-lg hover:bg-gray-100 transition-colors whitespace-nowrap",children:"Sign Up Free"})]}),a.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:0===J.length?a.jsx("div",{className:"p-12 text-center text-gray-500",children:A?"No subjects found matching your search.":"No folders found."}):a.jsx("div",{children:J.map(e=>e.isFolder?X(e):Y(e))})})]})]})}},9673:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`D:\web app\frontend\src\app\past-papers\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[517,434,824],()=>s(5736));module.exports=a})();