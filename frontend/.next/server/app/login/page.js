(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1013:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(974),r(5495),r(5866);var s=r(3191),a=r(8716),n=r(7922),o=r.n(n),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,974)),"D:\\web app\\frontend\\src\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5495)),"D:\\web app\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\web app\\frontend\\src\\app\\login\\page.tsx"],u="/login/page",b={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4513:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2608:(e,t,r)=>{Promise.resolve().then(r.bind(r,2126))},6928:(e,t,r)=>{Promise.resolve().then(r.bind(r,4146))},4146:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(326),a=r(7577),n=r(5047),o=r(9837),i=r(2777),l=r(434);function d(){let[e,t]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[b,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)("");async function x(t){t.preventDefault(),u(""),h(""),p(!0);try{let{data:t,error:s}=await i.O.auth.signInWithPassword({email:e,password:r});if(s){s.message.includes("Email not confirmed")?u("Please verify your email address before logging in. Check your inbox."):u(s.message),p(!1);return}if(t.session){let{data:e,error:r}=await i.O.from("profiles").select("role, full_name, onboarding_complete").eq("id",t.user.id).single();if(r){console.error("Profile fetch error:",r),u("Failed to fetch user profile"),p(!1);return}window.location.href=e?.role==="teacher"?"/teacher/dashboard":e?.role==="admin"?"/admin/dashboard":e?.onboarding_complete?"/student/dashboard":"/onboarding"}}catch(e){console.error("Login error:",e),u("An unexpected error occurred")}finally{p(!1)}}async function g(){u(""),p(!0);try{let{data:e,error:t}=await i.O.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});t&&(u(t.message),p(!1))}catch(e){console.error("Google login error:",e),u("Failed to initiate Google login"),p(!1)}}return(0,n.useRouter)(),(0,n.useSearchParams)(),(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-white via-blue-50 to-pink-50 relative overflow-hidden",children:[s.jsx(l.default,{href:"/",className:"absolute top-6 left-6 z-10 px-4 py-2 bg-white/80 backdrop-blur-sm border border-gray-200 text-brand-burgundy font-semibold rounded-lg hover:bg-white transition-all shadow-sm",children:"← Home"}),(0,s.jsxs)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[s.jsx("div",{className:"absolute top-8 left-8 w-32 h-32 bg-brand-light rounded-full opacity-60 animate-pulse",style:{animationDuration:"3s"}}),s.jsx("div",{className:"absolute top-4 right-24 w-0 h-0 border-l-[40px] border-l-transparent border-r-[40px] border-r-transparent border-b-[70px] border-b-brand-blue/30 opacity-70 animate-bounce",style:{animationDuration:"4s"}}),s.jsx("div",{className:"absolute bottom-16 left-16 w-20 h-20 bg-brand-red rotate-45 opacity-60 animate-pulse",style:{animationDuration:"3.5s"}}),s.jsx("div",{className:"absolute bottom-8 right-8 w-32 h-32 bg-brand-yellow rounded-tl-[100px] opacity-60"}),s.jsx("div",{className:"absolute top-1/2 left-8 w-24 h-48 bg-brand-pink rounded-tr-[70px] rounded-br-[70px] opacity-50 -translate-y-1/2 animate-pulse",style:{animationDuration:"4s"}}),s.jsx("div",{className:"absolute top-1/2 right-24 w-20 h-20 border-[8px] border-brand-pink bg-white/70 opacity-60 -translate-y-1/2"}),s.jsx("span",{className:"absolute top-20 left-1/2 text-5xl font-black text-brand-burgundy opacity-10 select-none",style:{transform:"rotate(-12deg)"},children:"O LEVELS"}),s.jsx("span",{className:"absolute bottom-24 right-1/2 text-4xl font-black text-brand-pink opacity-10 select-none",style:{transform:"rotate(8deg)"},children:"A LEVELS"}),s.jsx("span",{className:"absolute top-1/3 right-12 text-3xl font-black text-brand-blue opacity-10 select-none",style:{transform:"rotate(-6deg)"},children:"O LEVELS"}),s.jsx("span",{className:"absolute bottom-1/4 left-1/3 text-3xl font-black text-brand-yellow opacity-10 select-none",style:{transform:"rotate(10deg)"},children:"A LEVELS"})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-md p-10 rounded-2xl shadow-2xl w-full max-w-md z-10 relative border border-gray-100",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-black text-brand-burgundy mb-2",children:"Welcome Back"}),s.jsx("p",{className:"text-gray-600",children:"Sign in to continue your learning journey"})]}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-5",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",placeholder:"your.email@example.com",value:e,onChange:e=>t(e.target.value),className:"w-full border-2 border-gray-200 p-3.5 rounded-xl focus:border-brand-red focus:outline-none transition-colors",required:!0,disabled:b})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),s.jsx("input",{type:"password",placeholder:"••••••••",value:r,onChange:e=>d(e.target.value),className:"w-full border-2 border-gray-200 p-3.5 rounded-xl focus:border-brand-red focus:outline-none transition-colors",required:!0,disabled:b})]}),c&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-sm font-medium",children:c})}),m&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg",children:s.jsx("p",{className:"text-green-700 text-sm font-medium",children:m})}),s.jsx(o.z,{type:"submit",className:"w-full bg-brand-red hover:bg-brand-burgundy text-white py-3.5 rounded-xl font-semibold text-lg transition-all transform hover:scale-[1.02] shadow-lg",disabled:b,children:b?"Signing in...":"Sign In"})]}),(0,s.jsxs)("div",{className:"relative my-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"OR"})})]}),(0,s.jsxs)(o.z,{type:"button",onClick:g,className:"w-full bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 py-3.5 rounded-xl font-semibold text-lg transition-all flex items-center justify-center gap-3 shadow-md hover:shadow-lg",disabled:b,children:[(0,s.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),s.jsx("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",s.jsx(l.default,{href:"/signup",className:"text-brand-red font-semibold hover:text-brand-burgundy transition-colors",children:"Sign Up"})]})})]})]})}function c(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-pink-50"}),children:s.jsx(d,{})})}},2126:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(326),a=r(5684);function n({children:e}){return s.jsx(a.H,{children:e})}},9837:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var s=r(326),a=r(9360),n=r(1223),o=r(7577);let i=(0,a.j)("inline-flex items-center justify-center rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 px-3 text-xs",lg:"h-12 px-6",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=(0,o.forwardRef)(({className:e,variant:t,size:r,...a},o)=>s.jsx("button",{className:(0,n.cn)(i({variant:t,size:r,className:e})),ref:o,...a}));l.displayName="Button"},5684:(e,t,r)=>{"use strict";r.d(t,{H:()=>l,a:()=>d});var s=r(326),a=r(7577),n=r(2777),o=r(5047);let i=(0,a.createContext)({user:null,profile:null,loading:!0,signOut:async()=>{}});function l({children:e}){let[t,r]=(0,a.useState)(null),[l,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),b=(0,o.useRouter)();(0,o.usePathname)();let p=async()=>{try{r(null),d(null);let{error:e}=await n.O.auth.signOut();e&&console.error("Error signing out:",e),b.push("/")}catch(e){console.error("Error during sign out:",e),b.push("/")}};return(0,a.useCallback)(()=>{l&&("teacher"===l.role?b.push("/teacher/dashboard"):"admin"===l.role?b.push("/admin/dashboard"):l.onboarding_complete?b.push("/student/dashboard"):b.push("/onboarding"))},[l,b]),s.jsx(i.Provider,{value:{user:t,profile:l,loading:c,signOut:p},children:e})}let d=()=>(0,a.useContext)(i)},2777:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});let s=(0,r(5157).eI)("https://nxihrfrcxeawzyhuiatm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54aWhyZnJjeGVhd3p5aHVpYXRtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkxODg0MjgsImV4cCI6MjA4NDc2NDQyOH0.Yw17HtO_0dmgLwqOMmPx-Q9FZAbTi1UgSVn7lQq65OA",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},1223:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(1135),a=r(1009);function n(...e){return(0,a.m6)((0,s.W)(e))}},5495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>d});var s=r(9510),a=r(880),n=r.n(a),o=r(2268),i=r.n(o);r(5023);let l=(0,r(8570).createProxy)(String.raw`D:\web app\frontend\src\app\providers.tsx#default`),d={title:"Propel | Master Your O-Levels",description:"The premium learning platform for ambitious O-Level students. Expert tutors, topicals, and interactive past papers."};function c({children:e}){return s.jsx("html",{lang:"en",className:`${n().variable} ${i().variable}`,children:s.jsx("body",{className:i().className,children:s.jsx(l,{children:e})})})}},974:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`D:\web app\frontend\src\app\login\page.tsx#default`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[517,434,582],()=>r(1013));module.exports=s})();